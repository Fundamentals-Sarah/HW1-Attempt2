## in R,
## read file from a URL, from github
## file is in **excel**
## create the object '**fragility23**' to hold the data
#this gives you a clean slate to work from
rm(list = ls())
# importing data
# opening a file from a url (file in Excel), name it 'fragility23'
linkGit='https://github.com/Fundamentals-Sarah/HW1-Attempt2/raw/refs/heads/main/FSI-2023-DOWNLOAD.xlsx'
#install.packages('rio')
library(rio) # package needed
fragility23=rio::import(file = linkGit) #object that will hold the result
## Pull a list of column names for the object fragility23
names(x = fragility23)
## Check the data types in df
## Check if R is correctly identifying certain columns as holding numeric data
str(object = fragility23)
## show only the first 10 rows, in the order they appear in the object
head(x = fragility23,10)
##show me the last 10 rows, in the order they appear in the object
tail(fragility23,10)
## Limiting your data to exclude those columns you wont be working with, which keeps the data more manageable in R:
##Country, Total,
## S1: Demographic Pressures,
## P1: State Legitimacy,
## E2: Economic Inequality
## into object 'frag23_sub'
fragility23[,c(5,11,9)]
## in R,
## read file from a URL, from github
## file is in **excel**
## create the object '**fragility23**' to hold the data
# use the code in line 8 to give you a clean slate to work from
rm(list = ls())
## in R,
## read file from a URL, from github
## file is in **excel**
## create the object '**fragility23**' to hold the data
# use the code in line 8 to give you a clean slate to work from
rm(list = ls())
# import your data
# open a file from a url (file in Excel), name it 'fragility23'
linkGit='https://github.com/Fundamentals-Sarah/HW1-Attempt2/raw/refs/heads/main/FSI-2023-DOWNLOAD.xlsx'
# install.packages('rio') in order to conduct your analyses
library(rio) # package needed
fragility23=rio::import(file = linkGit)
# install.packages('rio') in order to conduct your analyses, this may need to be readded each session
library(rio) # package needed
fragility23=rio::import(file = linkGit)
## Pull a list of column names from the object fragility23 into one list
names(x = fragility23)
## Check if R is correctly identifying certain columns as holding numeric data, if the code works numeric data should be identified with num
str(object = fragility23)
## Show only the first 10 rows, in the order they appear in the object
head(x = fragility23,10)
## show only the first 10 rows, in the order they appear in the object
tail(fragility23,10)
## Below code shows transformative manipulations for starting to analyze the data
## Limit your data to exclude those columns you wont be working with, which keeps the data more manageable in R:
##Country, Total,
## S1: Demographic Pressures,
## P1: State Legitimacy,
## E2: Economic Inequality
## into object 'frag23_sub'
fragility23[,c(5,11,9)]
## A better option for limiting columns is to use column names instead of numbers which can be miscounted, example below
fragility23[,c('S1: Demographic Pressures','P1: State Legitimacy','E2: Economic Inequality')]
##grep pattern allows you to search the data for certain strings of text and quickly get a count
grep(pattern = "Country|S1|P1|E2|Total",x = names(fragility23),fixed = F,value = T) # test
## indicates what you are keeping for strings for a data object for transformation
keep=grep("Country|S1|P1|E2|Total",names(fragility23),fixed = F,value = T)
frag23_sub=fragility23[,keep]
## indicates what you are keeping for strings for a data object for transformation and give this object a new name as a subset
keep=grep("Country|S1|P1|E2|Total",names(fragility23),fixed = F,value = T)
frag23_sub=fragility23[,keep]
##  Returns a list of the top ten best countries on the column 'E2' from 'frag23_sub'
tail(frag23_sub[order(x=-frag23_sub$E2),],10) #option1
tail(frag23_sub[order(x=-frag23_sub$E2),'Country'],10) #option2
## Calculates basic summary statistics for those countries including in "frag23_sub"
summary(object = frag23_sub)
## Returns the value of the worst quartile of the Total with the sub data object
q3_Total=quantile(x = frag23_sub$Total,
probs = 0.75,
na.rm = TRUE)
q3_Total=quantile(x = frag23_sub$Total,
probs = 0.75,
na.rm = TRUE)
q3_Total
## Returns the correlations between "S1","E2", and "P1"
cor(x=frag23_sub[,-c(1,2)]) #no 'Country', no "Total'
## Create a regression plot of P1 and E2 on S1
lm(S1~P1+E2,data=frag23_sub)
## Create a regression plot of P1 and E2 on S1
lm(S1~P1+E2,data=frag23_sub)
## Returns correlations between "S1","E2", "P1" and their "significance"
#?install.packages("corrtable")
library(corrtable)
corrtable::correlation_matrix(df = frag23_sub[,-c(1,2)])
## Returns correlations between "S1","E2", "P1" and their "significance", with 1.0 showing Pearsen's coefficient
#?install.packages("corrtable")
library(corrtable)
corrtable::correlation_matrix(df = frag23_sub[,-c(1,2)])
## Create a regression plot of P1 and E2 on S1 so we can better see how these variables are associated with one another
lm(S1~P1+E2,data=frag23_sub)
# some plotting
## Produce a aplot for the 'P1' variable in a histogram format
hist(x = frag23_sub$P1) #base r
## The code below will produce the visual correlation between S1 and E2 in black and white
plot(x=frag23_sub$S1, y=frag23_sub$E2)
## Now apply color coding to the visual correlation to color points of countries in the worst quartile of Total
frag23_sub$Total>=q3_Total
frag23_sub$worstQt=frag23_sub$Total>=q3_Total
## Now apply color coding to the visual correlation to color points of countries in the worst quartile of Total
frag23_sub$Total>=q3_Total
frag23_sub$worstQt=frag23_sub$Total>=q3_Total
plot(frag23_sub$S1,
frag23_sub$E2,pch=20,
col = as.factor(frag23_sub$worstQt))
#install.packages("sjPlot")
library(sjPlot)
plot_models(model)
```{r}
```{r}
names(x = fragility23)
str(object = fragility23)
head(x = fragility23,10)
tail(fragility23,10)
fragility23[,c(5,11,9)]
fragility23[,c('S1: Demographic Pressures','P1: State Legitimacy','E2: Economic Inequality')]
grep(pattern = "Country|S1|P1|E2|Total",x = names(fragility23),fixed = F,value = T)
keep=grep("Country|S1|P1|E2|Total",names(fragility23),fixed = F,value = T)
frag23_sub=fragility23[,keep]
names(frag23_sub)[3:5]=c("S1","E2", "P1")
tail(frag23_sub[order(x=-frag23_sub$E2),],10) #option1
tail(frag23_sub[order(x=-frag23_sub$E2),'Country'],10) #option2
summary(object = frag23_sub)
q3_Total=quantile(x = frag23_sub$Total,
probs = 0.75,
na.rm = TRUE)
q3_Total
cor(x=frag23_sub[,-c(1,2)])
library(corrtable)
corrtable::correlation_matrix(df = frag23_sub[,-c(1,2)])
lm(S1~P1+E2,data=frag23_sub)
model <- lm(S1 ~ P1 + E2, data = frag23_sub)
summary(model)
hist(x = frag23_sub$P1)
plot(x=frag23_sub$S1, y=frag23_sub$E2)
frag23_sub$Total>=q3_Total
frag23_sub$worstQt=frag23_sub$Total>=q3_Total
plot(frag23_sub$S1,
frag23_sub$E2,pch=20,
col = as.factor(frag23_sub$worstQt))
library(sjPlot)
plot_models(model)
names(x = fragility23)
View(fragility23)
View(fragility23)
names(x = fragility23)
setwd("C:/Users/sarah/Desktop/DACSS601/HW1-Attempt2")
View(fragility23)
library(rio) # package needed
fragility23=rio::import(file = linkGit)
